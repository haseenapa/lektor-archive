{% extends "layout.html" %}
{% block body %}
  <div class="editor pane">
    <div class="container">
      <h3>Edit “{{ g.source.record_label }}”</h3>

      <form action="" method=post>
        <div class=meta>
          <dl>
            <dt>Path:
            <dd>{{ g.source['_path'] }}
            <dt>ID:
            <dd>{% if g.source['_id'] %}{{ g.source['_id'] }}{% else %}<em>(Empty ID)</em>{% endif %}
            <dt>GID:
            <dd>{{ g.source['_gid'] }}
            <dt>Model:
            <dd><code>{{ g.source['_model'] }}</code>
            <dt>URL Path:
            <dd>
            {% if g.source.parent %}
              <code>{{ g.source.parent.url_path.rstrip('/') }}/</code>
              <input type=text name="_slug" value="{{ raw_record['_slug']
                }}" placeholder="{{ default_slug }}">
            {% else %}
              <em>Forced to </em><code>/</code>
            {% endif %}
            </dd>
            <dt>Template:
            <dd><input type=text name="_template" value="{{ raw_record['_template']
              }}" placeholder="{{ default_template }}">
          </dl>
        </div>

        <div class="edit-area">
          {% for field in g.source.datamodel.fields %}
            <div class="field row">
              <div class="form-group col-md-12">
                <label for="input-{{ field.name }}">{{ field.label }}</label>
                {{ field.widget.render(raw_record[field.name], class='form-control',
                  id='input-' ~ field.name) }}
              </div>
            </div>
          {% endfor %}
          <button type="submit" class="btn btn-default">Save</button>
        </div>
      </form>
    </div>
  </div>
{% endblock %}
